<ï¼doctype html>
<html>
<head>
<title>Robloxç™½åå•è¿œç¨‹æ‰§è¡Œ</title>
<style>
*{
æ¡†å¤§å°ï¼šè¾¹æ¡†æ¡†ï¼›
é¡µè¾¹è·ï¼š0ï¼›
å¡«å……ï¼š0ï¼›
        }
        
æ­£æ–‡{
å­—ä½“ç³»åˆ—ï¼š'Segoe UI'ï¼Œå®‹ä½“ï¼Œæ—¥å†…ç“¦ï¼ŒVerdanaï¼Œæ— è¡¬çº¿ï¼›
èƒŒæ™¯ï¼šçº¿æ€§æ¢¯åº¦(135åº¦ï¼Œ#667EA 0%ï¼Œ#764ba2100%)ï¼›
æœ€ä½é«˜åº¦ï¼š100vhï¼›
å¡«æ–™ï¼š20pxï¼›
        }
        
.å®¹å™¨{
æœ€å¤§å®½åº¦ï¼š1200pxï¼›
é¡µè¾¹è·ï¼š0è‡ªåŠ¨ï¼›
èƒŒæ™¯ï¼šç™½è‰²ï¼›
è¾¹ç•ŒåŠå¾„ï¼š20pxï¼›
å¡«æ–™ï¼š40pxï¼›
ç®±å½¢é˜´å½±:020px60pxRGBA(0,0,0,0.3);
        }
        
H1{
é¢œè‰²ï¼š#333ï¼›
æ–‡æœ¬å¯¹é½ï¼šå±…ä¸­ï¼›
åº•è¾¹è·ï¼š10pxï¼›
å­—ä½“å¤§å°ï¼š2.5ä»–ä»¬ï¼›
        }
        
.å‰¯æ ‡é¢˜{
æ–‡æœ¬å¯¹é½ï¼šå±…ä¸­ï¼›
            color: #666;
            margin-bottom: 40px;
            font-size: 1.1em;
        }
        
        .panel {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
            border: 1px solid #e9ecef;
        }
        
        .panel h2 {
            color: #333;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #0078D7;
            font-size: 1.5em;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
            font-size: 0.9em;
        }
        
        input, textarea, select {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ced4da;
            border-radius: 10px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #0078D7;
            box-shadow: 0 0 0 3px rgba(0,120,215,0.1);
        }
        
        textarea {
            min-height: 120px;
            resize: vertical;
            font-family: 'Consolas', 'Monaco', monospace;
        }
        
        .btn {
            background: linear-gradient(135deg, #0078D7 0%, #005A9E 100%);
            color: white;
            border: none;
            padding: 14px 28px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0,120,215,0.3);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #6c757d 0%, #495057 100%);
        }
        
        .btn-danger {
            background: linear-gradient(135deg, #dc3545 0%, #bd2130 100%);
        }
        
        .btn-success {
            background: linear-gradient(135deg, #28a745 0%, #1e7e34 100%);
        }
        
        .btn-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }
        
        .user-status {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: white;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 5px solid #0078D7;
        }
        
        .status-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }
        
        .status-online {
            background: #d4edda;
            color: #155724;
        }
        
        .status-offline {
            background: #f8d7da;
            color: #721c24;
        }
        
        .status-whitelist {
            background: #d1ecf1;
            color: #0c5460;
        }
        
        .status-info h3 {
            margin-bottom: 5px;
            color: #333;
        }
        
        .status-info p {
            color: #666;
            font-size: 0.9em;
        }
        
        .log {
            background: #333;
            color: #00ff00;
            font-family: 'Consolas', 'Monaco', monospace;
            padding: 15px;
            border-radius: 10px;
            max-height: 300px;
            overflow-y: auto;
            margin-top: 20px;
        }
        
        .log-entry {
            margin-bottom: 5px;
            padding-bottom: 5px;
            border-bottom: 1px solid #444;
        }
        
        .log-time {
            color: #888;
            font-size: 0.8em;
        }
        
        .log-success {
            color: #00ff00;
        }
        
        .log-error {
            color: #ff4444;
        }
        
        .log-warning {
            color: #ffaa00;
        }
        
        .quick-commands {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }
        
        .server-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .server-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            border: 2px solid #e9ecef;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .server-card:hover {
            border-color: #0078D7;
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }
        
        .server-card.active {
            border-color: #0078D7;
            background: #f0f8ff;
        }
        
        .server-card h4 {
            color: #333;
            margin-bottom: 10px;
            font-size: 1.1em;
        }
        
        .server-info {
            color: #666;
            font-size: 0.9em;
            line-height: 1.5;
        }
        
        .badge {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 0.8em;
            font-weight: 600;
            margin-left: 10px;
        }
        
        .badge-success {
            background: #d4edda;
            color: #155724;
        }
        
        .badge-danger {
            background: #f8d7da;
            color: #721c24;
        }
        
        .badge-warning {
            background: #fff3cd;
            color: #856404;
        }
        
        .badge-info {
            background: #d1ecf1;
            color: #0c5460;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- æ ‡é¢˜ -->
        <h1>ğŸ” Roblox ç™½åå•è¿œç¨‹æ§åˆ¶ç³»ç»Ÿ</h1>
        <p class="subtitle">ä»…é™æˆæƒç”¨æˆ·æ‰§è¡Œè¿œç¨‹æ“ä½œ</p>
        
        <!-- ç”¨æˆ·è®¤è¯é¢æ¿ -->
        <div class="panel">
            <h2>ğŸ‘¤ ç”¨æˆ·èº«ä»½éªŒè¯</h2>
            
            <div class="form-group">
                <label for="username">Roblox ç”¨æˆ·å</label>
                <input type="text" id="username" placeholder="è¾“å…¥ä½ çš„Robloxç”¨æˆ·å" value="">
            </div>
            
            <div id="userStatus" class="user-status" style="display: none;">
                <div class="status-icon" id="statusIcon">
                    <span>ğŸ‘¤</span>
                </div>
                <div class="status-info">
                    <h3 id="statusTitle">æœªéªŒè¯</h3>
                    <p id="statusText">è¯·ç™»å½•éªŒè¯</p>
                </div>
            </div>
            
            <div class="btn-group">
                <button class="btn" onclick="verifyUser()">
                    <span>âœ…</span> éªŒè¯ç”¨æˆ·
                </button>
                <button class="btn btn-secondary" onclick="checkWhitelist()">
                    <span>ğŸ“‹</span> æ£€æŸ¥ç™½åå•çŠ¶æ€
                </button>
                <button class="btn btn-danger" onclick="logoutUser()">
                    <span>ğŸšª</span> é€€å‡ºç™»å½•
                </button>
            </div>
        </div>
        
        <!-- æ¸¸æˆè¿æ¥é¢æ¿ -->
        <div class="panel">
            <h2>ğŸ® æ¸¸æˆè¿æ¥</h2>
            
            <div class="form-group">
                <label for="placeId">æ¸¸æˆID</label>
                <input type="text" id="placeId" placeholder="è¾“å…¥æ¸¸æˆPlace ID" value="">
            </div>
            
            <div class="btn-group">
                <button class="btn" onclick="connectToGame()">
                    <span>ğŸ”—</span> è¿æ¥æ¸¸æˆ
                </button>
                <button class="btn btn-secondary" onclick="findServers()">
                    <span>ğŸ”„</span> æŸ¥æ‰¾æœåŠ¡å™¨
                </button>
            </div>
            
            <div id="serverList" class="server-list"></div>
        </div>
        
        <!-- ä»£ç æ‰§è¡Œé¢æ¿ -->
        <div class="panel">
            <h2>ğŸ’» ä»£ç æ‰§è¡Œ</h2>
            <p style="color: #666; margin-bottom: 20px; font-size: 0.9em;">
                åªæœ‰ç™½åå•ç”¨æˆ·æ‰èƒ½æ‰§è¡Œå‘½ä»¤ã€‚å½“å‰ç”¨æˆ·: <span id="currentUser" style="font-weight: bold;">æœªç™»å½•</span>
            </p>
            
            <div class="form-group">
                <label for="codeInput">è¦æ‰§è¡Œçš„ä»£ç </label>
                <textarea id="codeInput" placeholder="ä¾‹å¦‚: print('Hello from website!')">print('Hello from authorized user!')</textarea>
            </div>
            
            <div class="btn-group">
                <button class="btn btn-success" onclick="executeCode()">
                    <span>ğŸš€</span> æ‰§è¡Œä»£ç 
                </button>
                <button class="btn" onclick="testConnection()">
                    <span>ğŸ”</span> æµ‹è¯•è¿æ¥
                </button>
            </div>
            
            <!-- å¿«æ·å‘½ä»¤ -->
            <h3 style="margin-top: 30px; margin-bottom: 15px;">âš¡ å¿«æ·å‘½ä»¤</h3>
            <div class="quick-commands">
                <button class="btn" onclick="runCommand('print(\"ç½‘ç«™è¿œç¨‹æ‰§è¡ŒæˆåŠŸï¼\")')">
                    <span>ğŸ“¢</span> æµ‹è¯•æ‰“å°
                </button>
                <button class="btn" onclick="runCommand('print players')">
                    <span>ğŸ‘¥</span> æ‰“å°åœ¨çº¿ç©å®¶
                </button>
                <button class="btn" onclick="runCommand('print(game.JobId)')">
                    <span>ğŸ†”</span> æœåŠ¡å™¨ID
                </button>
                <button class="btn" onclick="runCommand('print(os.date())')">
                    <span>ğŸ•’</span> æœåŠ¡å™¨æ—¶é—´
                </button>
            </div>
        </div>
        
        <!-- æ‰§è¡Œæ—¥å¿— -->
        <div class="panel">
            <h2>ğŸ“œ æ‰§è¡Œæ—¥å¿—</h2>
            <div class="btn-group">
                <button class="btn" onclick="clearLog()">
                    <span>ğŸ§¹</span> æ¸…ç©ºæ—¥å¿—
                </button>
                <button class="btn btn-secondary" onclick="exportLog()">
                    <span>ğŸ“¥</span> å¯¼å‡ºæ—¥å¿—
                </button>
            </div>
            
            <div id="log" class="log">
                <div class="log-entry log-warning">
                    <span class="log-time">[ç³»ç»Ÿ]</span> ç­‰å¾…ç”¨æˆ·ç™»å½•...
                </div>
            </div>
        </div>
    </div>

    <script>
        // å…¨å±€çŠ¶æ€
        let currentUser = null;
        let userVerified = false;
        let currentPlaceId = '';
        let currentServer = null;
        let connectionType = null;
        let logEntries = [];
        
        // åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            // æ£€æŸ¥æœ¬åœ°å­˜å‚¨çš„ç”¨æˆ·
            const savedUser = localStorage.getItem('roblox_username');
            if (savedUser) {
                document.getElementById('username').value = savedUser;
                verifyUser();
            }
            
            // æ£€æŸ¥æ¸¸æˆID
            const savedPlaceId = localStorage.getItem('roblox_placeid');
            if (savedPlaceId) {
                document.getElementById('placeId').value = savedPlaceId;
            }
        });
        
        // ç”¨æˆ·éªŒè¯
        async function verifyUser() {
            const username = document.getElementById('username').value.trim();
            if (!username) {
                showLog('è¯·è¾“å…¥ç”¨æˆ·å', 'error');
                return;
            }
            
            showLog('éªŒè¯ç”¨æˆ· ' + username + '...', 'info');
            
            try {
                // 1. éªŒè¯ç”¨æˆ·åæ˜¯å¦å­˜åœ¨ï¼ˆé€šè¿‡Roblox APIï¼‰
                const userResponse = await fetch(`https://users.roblox.com/v1/usernames/users`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ usernames: [username] })
                });
                
                const userData = await userResponse.json();
                
                if (userData.data && userData.data.length > 0) {
                    const user = userData.data[0];
                    currentUser = user.name;
                    localStorage.setItem('roblox_username', currentUser);
                    
                    // æ›´æ–°UI
                    document.getElementById('currentUser').textContent = currentUser;
                    
                    // æ˜¾ç¤ºç”¨æˆ·çŠ¶æ€
                    showUserStatus(true, user.id);
                    
                    showLog('ç”¨æˆ·éªŒè¯æˆåŠŸ: ' + currentUser, 'success');
                    
                    // è‡ªåŠ¨æ£€æŸ¥ç™½åå•çŠ¶æ€
                    await checkWhitelist();
                } else {
                    showLog('ç”¨æˆ·ä¸å­˜åœ¨: ' + username, 'error');
                    showUserStatus(false);
                }
            } catch (error) {
                showLog('éªŒè¯å¤±è´¥: ' + error.message, 'error');
                showUserStatus(false);
            }
        }
        
        // æ£€æŸ¥ç™½åå•çŠ¶æ€
        async function checkWhitelist() {
            if (!currentUser) {
                showLog('è¯·å…ˆéªŒè¯ç”¨æˆ·', 'error');
                return;
            }
            
            showLog('æ£€æŸ¥ç™½åå•çŠ¶æ€...', 'info');
            
            // è¿™é‡Œéœ€è¦è¿æ¥åˆ°ä½ çš„Robloxæ¸¸æˆæœåŠ¡å™¨
            // å®é™…æƒ…å†µä¸­ï¼Œä½ å¯èƒ½éœ€è¦é€šè¿‡WebSocketæˆ–HTTPè¯·æ±‚åˆ°ä½ çš„åç«¯
            
            // æ¨¡æ‹Ÿæ£€æŸ¥ï¼ˆå®é™…å®ç°éœ€è¦è¿æ¥åˆ°æ¸¸æˆæœåŠ¡å™¨ï¼‰
            setTimeout(() => {
                // æ¨¡æ‹Ÿå“åº”
                const isWhitelisted = Math.random() > 0.5; // æ¨¡æ‹Ÿ50%çš„æ¦‚ç‡åœ¨ç™½åå•
                
                if (isWhitelisted) {
                    userVerified = true;
                    showLog('âœ… ç”¨æˆ·åœ¨ç™½åå•ä¸­ï¼Œå¯ä»¥æ‰§è¡Œå‘½ä»¤', 'success');
                    updateUserStatus('åœ¨ç™½åå•ä¸­', 'status-whitelist');
                } else {
                    userVerified = false;
                    showLog('âŒ ç”¨æˆ·ä¸åœ¨ç™½åå•ä¸­ï¼Œæ— æ³•æ‰§è¡Œå‘½ä»¤', 'error');
                    updateUserStatus('ä¸åœ¨ç™½åå•ä¸­', 'status-offline');
                }
            }, 1000);
        }
        
        // æ˜¾ç¤ºç”¨æˆ·çŠ¶æ€
        function showUserStatus(verified, userId) {
            const statusDiv = document.getElementById('userStatus');
            const statusIcon = document.getElementById('statusIcon');
            const statusTitle = document.getElementById('statusTitle');
            const statusText = document.getElementById('statusText');
            
            statusDiv.style.display = 'flex';
            
            if (verified) {
                statusIcon.innerHTML = '<span>âœ…</span>';
                statusIcon.className = 'status-icon status-online';
                statusTitle.textContent = currentUser;
                statusText.textContent = 'ç”¨æˆ·å·²éªŒè¯';
            } else {
                statusIcon.innerHTML = '<span>âŒ</span>';
                statusIcon.className = 'status-icon status-offline';
                statusTitle.textContent = 'æœªéªŒè¯';
                statusText.textContent = 'ç”¨æˆ·éªŒè¯å¤±è´¥';
            }
        }
        
        function updateUserStatus(status, statusClass) {
            const statusIcon = document.getElementById('statusIcon');
            const statusText = document.getElementById('statusText');
            
            statusIcon.className = 'status-icon ' + statusClass;
            statusText.textContent = status;
        }
        
        // è¿æ¥æ¸¸æˆ
        async function connectToGame() {
            const placeId = document.getElementById('placeId').value.trim();
            if (!placeId) {
                showLog('è¯·è¾“å…¥æ¸¸æˆID', 'error');
                return;
            }
            
            currentPlaceId = placeId;
            localStorage.setItem('roblox_placeid', placeId);
            
            showLog('è¿æ¥æ¸¸æˆ ' + placeId + '...', 'info');
            
            // è‡ªåŠ¨æŸ¥æ‰¾æœåŠ¡å™¨
            await findServers();
        }
        
        // æŸ¥æ‰¾æœåŠ¡å™¨
        async function findServers() {
            if (!currentPlaceId) {
                showLog('è¯·å…ˆè¾“å…¥æ¸¸æˆID', 'error');
                return;
            }
            
            showLog('æŸ¥æ‰¾å¯ç”¨æœåŠ¡å™¨...', 'info');
            
            try {
                // ä½¿ç”¨Roblox APIè·å–æœåŠ¡å™¨åˆ—è¡¨
                const response = await fetch(`https://games.roblox.com/v1/games/${currentPlaceId}/servers/Public?limit=5`);
                const data = await response.json();
                
                const serverListDiv = document.getElementById('serverList');
                serverListDiv.innerHTML = '';
                
                if (data.data && data.data.length > 0) {
                    data.data.forEach(server => {
                        const serverCard = document.createElement('div');
                        serverCard.className = 'server-card';
                        serverCard.onclick = () => selectServer(server);
                        
                        serverCard.innerHTML = `
                            <h4>æœåŠ¡å™¨ ${server.id.slice(0, 8)}...
                                <span class="badge badge-success">åœ¨çº¿</span>
                            </h4>
                            <div class="server-info">
                                <p>ç©å®¶: ${server.playing}/${server.maxPlayers}</p>
                                <p>Ping: ${server.ping || 'N/A'}ms</p>
                                <p>åœ°åŒº: ${server.fps || 'N/A'}</p>
                            </div>
                        `;
                        
                        serverListDiv.appendChild(serverCard);
                    });
                    
                    // è‡ªåŠ¨é€‰æ‹©ç¬¬ä¸€ä¸ªæœåŠ¡å™¨
                    selectServer(data.data[0]);
                } else {
                    showLog('æœªæ‰¾åˆ°å¯ç”¨æœåŠ¡å™¨', 'warning');
                }
            } catch (error) {
                showLog('è·å–æœåŠ¡å™¨å¤±è´¥: ' + error.message, 'error');
            }
        }
        
        // é€‰æ‹©æœåŠ¡å™¨
        function selectServer(server) {
            currentServer = server;
            showLog('é€‰æ‹©æœåŠ¡å™¨: ' + server.id.slice(0, 8) + '...', 'success');
            
            // é«˜äº®é€‰ä¸­çš„æœåŠ¡å™¨
            document.querySelectorAll('.server-card').forEach(card => {
                card.classList.remove('active');
            });
            event.currentTarget.classList.add('active');
        }
        
        // æ‰§è¡Œä»£ç 
        async function executeCode() {
            if (!userVerified) {
                showLog('è¯·å…ˆéªŒè¯ç™½åå•ç”¨æˆ·', 'error');
                return;
            }
            
            if (!currentServer) {
                showLog('è¯·å…ˆé€‰æ‹©æœåŠ¡å™¨', 'error');
                return;
            }
            
            const code = document.getElementById('codeInput').value.trim();
            if (!code) {
                showLog('è¯·è¾“å…¥è¦æ‰§è¡Œçš„ä»£ç ', 'error');
                return;
            }
            
            showLog('æ‰§è¡Œä»£ç : ' + code, 'info');
            
            // æ„å»ºæ‰§è¡Œæ•°æ®
            const executionData = {
                username: currentUser,
                code: code,
                serverId: currentServer.id,
                timestamp: new Date().toISOString()
            };
            
            // å®é™…æ‰§è¡Œéœ€è¦è¿æ¥åˆ°æ¸¸æˆæœåŠ¡å™¨
            // è¿™é‡Œæ˜¯ä¸€ä¸ªæ¨¡æ‹Ÿå®ç°
            simulateExecution(executionData);
        }
        
        // æ¨¡æ‹Ÿä»£ç æ‰§è¡Œ
        function simulateExecution(data) {
            showLog('æ­£åœ¨æ‰§è¡Œ...', 'info');
            
            // æ¨¡æ‹Ÿå»¶è¿Ÿ
            setTimeout(() => {
                const success = Math.random() > 0.2; // æ¨¡æ‹Ÿ80%æˆåŠŸç‡
                
                if (success) {
                    showLog(`âœ… æ‰§è¡ŒæˆåŠŸï¼ç”¨æˆ·: ${data.username}`, 'success');
                    showLog(`   ä»£ç : ${data.code}`, 'success');
                    showLog(`   æœåŠ¡å™¨: ${data.serverId.slice(0, 8)}...`, 'success');
                } else {
                    showLog(`âŒ æ‰§è¡Œå¤±è´¥ï¼ç”¨æˆ·: ${data.username}`, 'error');
                    showLog(`   ä»£ç : ${data.code}`, 'error');
                    showLog(`   æœåŠ¡å™¨: ${data.serverId.slice(0, 8)}...`, 'error');
                }
            }, 1500);
        }
        
        // å¿«æ·å‘½ä»¤
        function runCommand(command) {
            document.getElementById('codeInput').value = command;
            executeCode();
        }
        
        // æµ‹è¯•è¿æ¥
        function testConnection() {
            if (!currentUser) {
                showLog('è¯·å…ˆéªŒè¯ç”¨æˆ·', 'error');
                return;
            }
            
            showLog('æµ‹è¯•è¿æ¥...', 'info');
            
            setTimeout(() => {
                if (Math.random() > 0.3) {
                    showLog('âœ… è¿æ¥æµ‹è¯•æˆåŠŸ', 'success');
                    showLog('æœåŠ¡å™¨å“åº”æ­£å¸¸', 'success');
                } else {
                    showLog('âŒ è¿æ¥æµ‹è¯•å¤±è´¥', 'error');
                    showLog('è¯·æ£€æŸ¥ç½‘ç»œè¿æ¥å’ŒæœåŠ¡å™¨çŠ¶æ€', 'error');
                }
            }, 1000);
        }
        
        // é€€å‡ºç™»å½•
        function logoutUser() {
            currentUser = null;
            userVerified = false;
            
            localStorage.removeItem('roblox_username');
            
            document.getElementById('currentUser').textContent = 'æœªç™»å½•';
            document.getElementById('userStatus').style.display = 'none';
            document.getElementById('username').value = '';
            
            showLog('ç”¨æˆ·å·²é€€å‡ºç™»å½•', 'info');
        }
        
        // æ˜¾ç¤ºæ—¥å¿—
        function showLog(message, type = 'info') {
            const logDiv = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `<span class="log-time">[${time}]</span> ${message}`;
            
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
            
            // ä¿å­˜åˆ°å†å²
            logEntries.push({ time, message, type });
        }
        
        // æ¸…ç©ºæ—¥å¿—
        function clearLog() {
            document.getElementById('log').innerHTML = '';
            logEntries = [];
            showLog('æ—¥å¿—å·²æ¸…ç©º', 'info');
        }
        
        // å¯¼å‡ºæ—¥å¿—
        function exportLog() {
            const logText = logEntries.map(entry => 
                `[${entry.time}] ${entry.message}`
            ).join('\n');
            
            const blob = new Blob([logText], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'roblox-execution-log.txt';
            a.click();
            
            showLog('æ—¥å¿—å·²å¯¼å‡º', 'success');
        }
        
        // WebSocketè¿æ¥å®ç°ï¼ˆå®é™…éƒ¨ç½²æ—¶éœ€è¦ï¼‰
        function setupWebSocketConnection() {
            const ws = new WebSocket('ws://localhost:8080/roblox-control');
            
            ws.onopen = function() {
                connectionType = 'websocket';
                showLog('WebSocketè¿æ¥æˆåŠŸ', 'success');
                
                // å‘é€è®¤è¯ä¿¡æ¯
                ws.send(JSON.stringify({
                    type: 'authenticate',
                    username: currentUser,
                    placeId: currentPlaceId
                }));
            };
            
            ws.onmessage = function(event) {
                const data = JSON.parse(event.data);
                
                switch (data.type) {
                    case 'auth_response':
                        if (data.success) {
                            userVerified = true;
                            showLog('WebSocketè®¤è¯æˆåŠŸ', 'success');
                        } else {
                            showLog('WebSocketè®¤è¯å¤±è´¥: ' + data.message, 'error');
                        }
                        break;
                        
                    case 'execution_result':
                        showLog('æ‰§è¡Œç»“æœ: ' + data.result, 'success');
                        break;
                        
                    case 'error':
                        showLog('é”™è¯¯: ' + data.message, 'error');
                        break;
                }
            };
            
            ws.onerror = function(error) {
                showLog('WebSocketè¿æ¥é”™è¯¯: ' + error.message, 'error');
            };
            
            ws.onclose = function() {
                showLog('WebSocketè¿æ¥å·²å…³é—­', 'warning');
                connectionType = null;
            };
        }
        
        // HTTP APIè°ƒç”¨ï¼ˆå®é™…éƒ¨ç½²æ—¶éœ€è¦ï¼‰
        async function callRobloxAPI(endpoint, data) {
            try {
                const response = await fetch(`https://your-api-server.com/${endpoint}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(data)
                });
                
                return await response.json();
            } catch (error) {
                showLog('APIè°ƒç”¨å¤±è´¥: ' + error.message, 'error');
                return null;
            }
        }
    </script>
</body>
</html>
